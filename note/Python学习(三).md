# Python学习(三)

## 一、同一运算符、成员运算符、优先级问题

**同一运算符**：

* 同一运算符用于比较两个对象的存储单元，实际比较的是对象的**地址**。

  | 运算符 | 描述                                         |
  | ------ | -------------------------------------------- |
  | is     | is是判断两个标识符是不是引用**同一个**对象   |
  | is not | is not是判断两个标识符是不是引用**不同**对象 |

> is与==的区别：
>
> * is用于判断**两个变量引用对象**是否同一个，即比较对象的地址。
> * ==用于判断**引用变量引用对象的值**是否相等，默认调用对象的\_eq_\()方法。
>
> ```python
> a = 20
> b = 20
> c = 30
> print("a和b是同一个对象",a is b) # 执行结果为True
> print("a和c是同一个对象",a is c) # 执行结果为False
> print("a和c不是同一个对象",a is not c) # 执行结果为True
> ```

**整数缓存问题**：

* **命令行**模式下，Python仅仅对**比较小的整数对象**进行缓存(范围为[-5,256])缓存起来。(C语言底层用**数组实**现，连续分配空间，便于查找，而非是所有整数对象)
* **文件**模式下，**所有数字**都会被缓存，范围是:[-无穷大,+无穷大]。
  * 缓存实现:[-5,256]仍然底层用数组实现，不在[-5,256]出现的数，缓存到**链表**中，**不连续**分配空间。

> 总结：
>
> * is比较两个对象的**id值**是否相等，是否指向**同一个内存地址**。
> * ==比较的是两个对象的**内存**是否相等，**值**是否相等。
> * is运算符比==**效率高**，在变量和**None**进行比较时，应该**使用is**。

**成员运算符**：

* 成员运算符测试实例中包含了一系列的成员，包括字符串，列表或元组。

  | 运算符 | 描述                                            |
  | ------ | ----------------------------------------------- |
  | in     | 如果在指定的序列中找到值返回True，否则返回False |
  | not in | 不在，则返回True                                |

```python
d = "python"
e = "py"
print(e in d) # True
f = [10,20,30]
print(10 not in f) #False
```

**运算符优先级问题**：

* 如下优先级，**从高到低**。

  | 运算符                          | 描述                 |
  | ------------------------------- | -------------------- |
  | **                              | 指数(最高优先级)     |
  | ~                               | 按位翻转             |
  | *  /  %  //                     | 乘，除，取模和取整除 |
  | +  -                            | 加法减法             |
  | >>  <<                          | 右移，左移运算符     |
  | &                               | 位'AND'              |
  | ^  \|                           | 位运算符             |
  | <=  <  >  >=                    | 比较运算符           |
  | <>  ==  !=                      | 等于运算符           |
  | =  %=  /=  //=  -=  +=  *=  **= | 赋值运算符           |
  | is  is not                      | 身份运算符           |
  | in  not in                      | 成员运算符           |
  | not  or and                     | 逻辑运算符           |

> 实际使用中，记住如下简单的规则即可，复杂的表达式一定要使用**小括号组织**。
>
> * 乘除优先加减。
> * 位运算和算术运算>比较运算符>逻辑运算符。

---



## 二、字符串、unicode字符集、三种创建字符串的方式、len()

**字符串基本特点**：

* 字符串的本质：**字符序列**。
* Python**不支持**单字符类型，单字符也是作为**一个字符串**使用的。

> Python的**字符串是不可变的**，我们无法对原字符串做任何修改。但可以将字符串的一部分复制到新创建的字符串，达到”看起来修改“的效果。

**字符串的编码**：

* Python直接支持Unicode，可以表示世界上任何书面语言的字符。

* Python的字符默认就是16位Unicode编码，ASCII码是Unicode编码的子集。

* 使用内置函数ord()可以把字符转换成对应的Unicode码。
* 使用内置函数chr()可以把十进制数字转换成对应的字符。

**引号创建字符串**：

* 我们可以通过**单引号**或**双引号**创建字符串。例如：a = ’abc‘  b = ”sxt“。

* 使用两种引号的好处是可以创建**本身就包含引号**的字符串，而不是使用转义字符。

  ```python
  a = "I'm a teacher!"
  print(a) # I'm a teacher!
  b = 'my name is "TOM"'
  print(b) # my name is "TOM"
  ```

* **连续三个**单引号或双引号，可以帮助我们创建**多行字符串**。在长字符串中会**保留原始的格式**。

  ```python
  s = '''
  	 I
  	 	 Love
  	 		  Python
  '''
  print(s)
  ```

**空字符串和len()函数**：

* Python允许空字符串的存在，**不包含任何字符且长度为0**。

  ```python
  c = ''
  print(len(c)) # 运行结果为0
  ```

* len()用于**计算**字符串含有多少字符。

  ```python
  d = 'abc爬虫'
  print(len(d)) # 运行结果为5
  ```

---



## 三、转义字符、字符串拼接、字符串复制、input()获取键盘输入

**转义字符**：

* 我们可以使用**\\+特殊字符**，实现某些难以用字符表示的效果。比如：换行等。

* 常见的转义字符有这些：

  | 转义字符   | 描述       |
  | ---------- | ---------- |
  | (在行尾时) | 续行符     |
  | \          | 反斜杠符号 |
  | '          | 单引号     |
  | ''         | 双引号     |
  | \b         | 退格       |
  | \n         | 换行       |
  | \t         | 横向制表符 |
  | \r         | 回车       |

**字符串拼接**：

* 可以使用**+**将多个字符串拼接起来。例如：‘aa’ + 'bb'结果是'aabb'。

  * 如果**+**两边都是字符串，则会**拼接**起来。
  * 如果**+**两边都是数字，则**加法**运算。
  * 如果**+**两边类型不同，则抛出**异常**。

* 可以将多个**字面字符串**直接放到一起实现拼接。例如：'aa''bb'结果是‘aabb’。

* 字符串拼接操作：

  ```python
  a = 'sxt' + 'qg'
  b = 'sxt''qg'
  print(a) # 运行结果为'sxtqg'
  print(b) # 运行结果为'sxtqg'
  ```

**字符串复制**：

使用 ***** 可以实现字符串复制。

```python
c = 'Sxt' * 3
print(c) # 运行结果为SxtSxtSxt
```

**不换行打印**：

我们前面调用print时，会**自动**打印一个换行符。有时，我们不想换行，不想自动添加换行符。我们可以自己通过参数**end = "任意字符串"**，实现末尾添加任何内容。

```python
print("sxt",end = ' ')
print("sxt",end = '##')
print("sxt")
# 运行结果为sxt sxt##sxt
```

**从控制台读取字符串**：

我们可以使用**input()**从控制台读取键盘输入的内容

```python
myname = input("请输入名字：")
salary = input("请输入月薪：") 
print("您的名字是："+myname)
print("您的年薪是："+str(int(salary)*12))
```

运行结果为：

![9aef506f-b6cf-4940-9e02-401631b81807](https://anem0ne.oss-cn-shenzhen.aliyuncs.com/test/20250121175410559.png)

---



## 四、str()、字符提取、replace()替换、内存分析

**replace()实现字符串替换**：

* **字符串不可改变**，但是，我们确实有时候需要替换某些字符。这时，只能通过创建新的字符串来实现。

  ```python
  a = 'acbdef'
  a = a.replace('d','D')
  print(a) # 运行结果为acbDef
  ```

* 整个过程中，实际上我们是创建了**新的字符串对象**，并指向了变量a，而不是修改了以前的字符串。

**str()实现数字转型字符串**：

* str()可以帮助我们将**其他数据类型**转换为**字符串**。

  ```python
  b = str(5.20) # b被转换成'5，20'
  ```

* 当我们在调用**print()**函数时，解释器**自动**调用了str()将非字符串的对象转成了字符串。

**使用[]提取字符**：

* 字符串的**本质**就是**字符序列**，我们可以通过在字符串后面添加**[]**，在[]里面指定**偏移量**，可以提取该位置的**单个字符**。
  * **正向**搜索：最**左**侧第一个字符，偏移量是**0**，第二个偏移量是**1**，以此类推，直到**len(str)-1**为止。
  * **反向**搜索：最**右**侧第一个字符，偏移量是**-1**，第二个偏移量是**-2**，以此类推，直到**-len(str)**为止。

* 操作-使用[]提取字符：

  ```python
  c = 'def'
  print(c[0]) # 运行结果为d
  print(c[-1]) # 运行结果为f
  ```

---



## 五、字符串切片slice操作、逆序

**字符串切片slice操作**：

* 切片slice操作可以让我们快速的**提取子字符串**，标准格式为：**[起始偏移量start:终止偏移量end\:步长step]**。

* 典型操作(三个量为**正数**)如下：

  | 操作和说明                                                | 示例            | 结果     |
  | --------------------------------------------------------- | --------------- | -------- |
  | [:]  提取**整个**字符串                                   | "abcdef"[:]     | "abcdef" |
  | [start:]  从**start**索引**开始**到**结尾**               | "abcdef"[2:]    | "cdef"   |
  | [:end]  从**头**开始直到**end-1**                         | "abcdef"[:2]    | "ab"     |
  | [start:end]  从**start**到**end-1**                       | "abcdef"[2:4]   | "cd"     |
  | [start:end\:step]  从**start**到**end-1**，步长是**step** | "abcdef"[1:5:2] | "bd"     |

* 其他操作(三个量为**负数**)如下：

  | 示例            | 说明                                   | 结果     |
  | --------------- | -------------------------------------- | -------- |
  | “abcdef”[-3:]   | 倒数三个                               | "def"    |
  | “abcdef”[-5:-3] | 倒数第八个到倒数第三个(**包头不包尾**) | “bc”     |
  | “abcdef”[::-1]  | 步长为负，从右到左反向提取             | “fedcba” |

* 切片操作时，起始偏移量和终止偏移量**不在[0,字符串长度-1]这个范围**，也**不会报错**。**起始**偏移量**小于0**则会被当作**从字符串末尾开始计数的索引**，**终止**偏移量**大于"字符串长度-1"**则会被当作**"字符串最大长度"**。

```python
a = "abcdef"
print(a[:]) # 运行结果为abcdef
print(a[2:]) # 运行结果为cdef
print(a[:2]) # 运行结果为ab
print(a[2:4]) # 运行结果为cd
print(a[1:5:2]) # 运行结果为bd
print(a[-3:]) # 运行结果为def
print(a[-5:-3]) # 运行结果为bc
print(a[::-1]) # 运行结果为fedcba
```

